# 지역 데이터 통합 및 지도 시각화 프로젝트

## 시작하기 전에

### 1. 필요한 환경
- Python 3.8 이상
- pip (Python 패키지 관리자)

### 2. 가상환경 설정 및 패키지 설치

#### 가상환경 생성 및 활성화
```bash
# 가상환경 생성
python -m venv venv

# 가상환경 활성화 (macOS/Linux)
source venv/bin/activate

# 가상환경 활성화 (Windows)
venv\Scripts\activate
```

#### 필요한 패키지 설치
```bash
# requirements.txt를 사용하여 모든 패키지 한번에 설치
pip install -r ../requirements.txt

# 또는 개별 설치
pip install pandas numpy matplotlib seaborn
```

### 3. 프로젝트 실행 방법

#### 단계별 실행
```bash
# 1단계: 데이터 통합 (개선된 버전)
python caffe_map_improved.py

# 2단계: 지도 시각화
python map_draw.py

# 3단계: 최단 경로 탐색 및 시각화
python map_direct_save.py
```

#### 실행 결과 파일
- `integrated_area_data.csv`: 통합된 데이터
- `map.png`: 기본 지도 시각화 결과
- `home_to_cafe.csv`: 최단 경로 데이터
- `map_graphics_coordinate.png`: 그래픽스 좌표계 경로 탐색 결과
- `map_math_coordinate.png`: 수학적 좌표계 경로 탐색 결과

### 4. 가상환경 종료
```bash
deactivate
```

---

## 실행 순서 및 구현 내용

아래는 각 단계별 최종 달성 현황과 구현된 로직에 대한 상세 설명입니다.

---

### 1단계: 데이터 수집 및 분석 (`caffe_map_improved.py`)

****

분리된 3개의 CSV 파일을 통합, 분석에 필요한 형태로 가공

* **구현된 로직:**
    * **데이터 병합:** `area_struct.csv`, `area_map.csv`, `area_category.csv` 세 파일 병합을 위해 `pandas` 사용. 좌표(`x`, `y`)와 `category` ID 기준 모든 정보를 한 DataFrame으로 통합.
    * **데이터 정제:** `category` ID를 실제 구조물 이름(`struct`)으로 변환, 이름이 없는 ID(0)는 '일반 지역'과 같이 의미 있는 값으로 처리.
    * **전체 지역 데이터 통합:** 모든 area(1, 2, 3)의 데이터를 통합하여 완전한 지도 데이터 생성.
    * **MyHome 위치 확인:** area 2의 (14,2) 위치에 있는 MyHome 데이터 포함.
    * **(보너스) 요약 통계:** 구조물 종류별 집계 리포트 구현.

---

### 2단계: 지도 시각화 (`map_draw.py`)

****

1단계에서 정제된 데이터를 `matplotlib` 라이브러리를 사용하여 시각적으로 표현.

* **구현된 로직:**
    * **좌표 및 그리드 설정:** 요구사항 좌측 상단이 (1, 1)이 되도록 좌표를 설정, 전체 맵에 그리드 라인으로 가독성 증가.
    * **조건부 마커 렌더링:** `for` 반복문과 `if` 조건문을 활용 데이터의 `struct`와 `ConstructionSite` 값에 따라 각기 다른 마커와 색상을 지도에 플로팅.
        * 아파트/빌딩: **갈색 원**
        * 반달곰 커피: **녹색 사각형**
        * 내 집: **녹색 삼각형**
        * 건설 현장: **회색 사각형**
    * **장애물 우선순위 처리:** 건설 현장과 다른 구조물이 겹칠 경우, 건설 현장(`ConstructionSite = 1`)을 우선적으로 표시하는 로직 구현.
    * **파일 저장:** 시각화된 결과는 요구사항에 따라 `map.png` 이미지 파일로 성공적으로 저장.

---

### 3단계: 최단 경로 탐색 (`map_direct_save.py`)

****

프로젝트의 마지막 단계, 지도 데이터 위에서 '내 집'부터 '반달곰 커피'까지의 최단 경로를 찾는 알고리즘을 구현.

* **구현된 로직:**
    * **A* 경로 탐색 알고리즘 구현:** A* 알고리즘을 직접 구현하여 최적의 경로를 탐색. 휴리스틱 함수로 맨하탄 거리를 사용하여 효율적인 경로 계산.
    * **장애물 처리:** 지도 데이터에서 `ConstructionSite`가 1인 좌표는 경로 탐색 시 지나갈 수 없는 **장애물**로 처리. 현실적인 경로를 계산하기 위해 이 알고리즘을 사용.
    * **다중 목적지 처리:** 여러 반달곰 커피 위치 중 가장 가까운 곳으로의 최단 경로를 자동으로 선택.
    * **경로 데이터 저장:** 계산된 최단 경로는 좌표 목록 형태로 `home_to_cafe.csv` 파일에 저장.
    * **이중 좌표계 시각화:** 
        * **그래픽스 좌표계** (`map_graphics_coordinate.png`): 좌측 상단이 (1,1)인 컴퓨터 그래픽스 방식
        * **수학적 좌표계** (`map_math_coordinate.png`): 좌측 하단이 (1,1)인 수학적 방식
    * **경로 시각화:** 두 좌표계 모두에서 탐색된 최단 경로를 **빨간 선**으로 표시하고 시작점과 도착점을 명확히 구분.

---

## 주요 개선사항

1. **완전한 데이터 통합**: 모든 area의 데이터를 포함하여 MyHome과 반달곰 커피 간의 경로 탐색 가능
2. **A* 알고리즘**: 효율적인 최단 경로 탐색을 위한 고급 알고리즘 구현
3. **이중 좌표계 지원**: 그래픽스와 수학적 좌표계 모두 지원하여 다양한 용도로 활용 가능
4. **한글 폰트 지원**: 운영체제별 한글 폰트 자동 설정으로 완벽한 한글 표시
5. **상세한 경로 정보**: 경로 길이, 총 거리 등 상세 정보 제공

---

## 파일 구조
